"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/watchlist/route";
exports.ids = ["app/api/watchlist/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwatchlist%2Froute&page=%2Fapi%2Fwatchlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwatchlist%2Froute.ts&appDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwatchlist%2Froute&page=%2Fapi%2Fwatchlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwatchlist%2Froute.ts&appDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_blakesingleton_Desktop_Stock_From_Scratch_src_app_api_watchlist_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/watchlist/route.ts */ \"(rsc)/./src/app/api/watchlist/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/watchlist/route\",\n        pathname: \"/api/watchlist\",\n        filename: \"route\",\n        bundlePath: \"app/api/watchlist/route\"\n    },\n    resolvedPagePath: \"/Users/blakesingleton/Desktop/Stock From Scratch/src/app/api/watchlist/route.ts\",\n    nextConfigOutput,\n    userland: _Users_blakesingleton_Desktop_Stock_From_Scratch_src_app_api_watchlist_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/watchlist/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3YXRjaGxpc3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRndhdGNobGlzdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRndhdGNobGlzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJsYWtlc2luZ2xldG9uJTJGRGVza3RvcCUyRlN0b2NrJTIwRnJvbSUyMFNjcmF0Y2glMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYmxha2VzaW5nbGV0b24lMkZEZXNrdG9wJTJGU3RvY2slMjBGcm9tJTIwU2NyYXRjaCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0I7QUFDNUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9jay1hbmFseXRpY3MtZGFzaGJvYXJkLz8xYjI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9ibGFrZXNpbmdsZXRvbi9EZXNrdG9wL1N0b2NrIEZyb20gU2NyYXRjaC9zcmMvYXBwL2FwaS93YXRjaGxpc3Qvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3dhdGNobGlzdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3dhdGNobGlzdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2F0Y2hsaXN0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JsYWtlc2luZ2xldG9uL0Rlc2t0b3AvU3RvY2sgRnJvbSBTY3JhdGNoL3NyYy9hcHAvYXBpL3dhdGNobGlzdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2F0Y2hsaXN0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwatchlist%2Froute&page=%2Fapi%2Fwatchlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwatchlist%2Froute.ts&appDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/watchlist/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/watchlist/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/server/createGetAuth.js\");\n/* harmony import */ var _services_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/database */ \"(rsc)/./src/services/database.ts\");\n/* harmony import */ var _services_users__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/users */ \"(rsc)/./src/services/users.ts\");\n\n\n\n\n// Force dynamic to avoid caching issues\nconst dynamic = \"force-dynamic\";\n// GET: Get user's watchlist\nasync function GET(req) {\n    try {\n        const { userId } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.getAuth)(req);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        console.log(`API: Fetching watchlist for user: ${userId}`);\n        // Ensure user exists in Supabase\n        await (0,_services_users__WEBPACK_IMPORTED_MODULE_2__.createUserIfNotExists)(userId);\n        try {\n            // Get watchlist from Supabase\n            const watchlistItems = await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.getUserWatchlist)(userId);\n            // Temporarily generate mock price data for each ticker\n            // Until we set up the stock_info table or use a real market data API\n            const transformedWatchlist = watchlistItems.map((item)=>({\n                    id: item.id,\n                    symbol: item.ticker,\n                    price: generateMockPrice(item.ticker),\n                    change: generateMockChange(),\n                    volume: generateMockVolume(),\n                    watching: true\n                }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                watchlist: transformedWatchlist\n            });\n        } catch (fetchError) {\n            console.error(\"Error fetching watchlist items:\", fetchError);\n            // Return empty watchlist instead of error\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                watchlist: []\n            });\n        }\n    } catch (error) {\n        console.error(\"Error in watchlist API:\", error);\n        // Return empty watchlist rather than error\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            watchlist: []\n        });\n    }\n}\n// POST: Add ticker to watchlist\nasync function POST(req) {\n    try {\n        const { userId } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.getAuth)(req);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const data = await req.json();\n        const { ticker } = data;\n        if (!ticker) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Ticker is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`API: Adding ticker ${ticker} for user: ${userId}`);\n        // Ensure user exists in Supabase\n        await (0,_services_users__WEBPACK_IMPORTED_MODULE_2__.createUserIfNotExists)(userId);\n        try {\n            // Add ticker to watchlist\n            console.log(`Calling addToWatchlist with userId: ${userId}, ticker: ${ticker.toUpperCase()}`);\n            await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.addToWatchlist)(userId, ticker.toUpperCase());\n            console.log(`Successfully added ticker ${ticker.toUpperCase()} to watchlist`);\n            // Get updated watchlist\n            const watchlistItems = await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.getUserWatchlist)(userId);\n            console.log(`Retrieved updated watchlist with ${watchlistItems.length} items`);\n            // Return mock data for now\n            const transformedWatchlist = watchlistItems.map((item)=>({\n                    id: item.id,\n                    symbol: item.ticker,\n                    price: generateMockPrice(item.ticker),\n                    change: generateMockChange(),\n                    volume: generateMockVolume(),\n                    watching: true\n                }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: `Added ${ticker.toUpperCase()} to watchlist`,\n                watchlist: transformedWatchlist\n            });\n        } catch (addError) {\n            console.error(\"Error adding ticker to watchlist:\", addError);\n            // Return 200 with current watchlist instead of throwing an error\n            // This prevents navigation on error but still shows the error in logs\n            const currentWatchlist = await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.getUserWatchlist)(userId);\n            const transformedWatchlist = currentWatchlist.map((item)=>({\n                    id: item.id,\n                    symbol: item.ticker,\n                    price: generateMockPrice(item.ticker),\n                    change: generateMockChange(),\n                    volume: generateMockVolume(),\n                    watching: true\n                }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: `Failed to add ${ticker.toUpperCase()} to watchlist`,\n                error: addError.message,\n                watchlist: transformedWatchlist\n            }, {\n                status: 200\n            }); // Still return 200 to prevent page navigation\n        }\n    } catch (error) {\n        console.error(\"Error in POST /api/watchlist:\", error);\n        // Return 200 with error message to prevent page navigation\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Server error\",\n            message: error?.message || \"Unknown error\",\n            watchlist: []\n        }, {\n            status: 200\n        });\n    }\n}\n// DELETE: Remove ticker from watchlist\nasync function DELETE(req) {\n    try {\n        const { userId } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.getAuth)(req);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(req.url);\n        const ticker = searchParams.get(\"ticker\");\n        if (!ticker) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Ticker is required\"\n            }, {\n                status: 400\n            });\n        }\n        try {\n            // Remove ticker from watchlist\n            await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.removeFromWatchlist)(userId, ticker.toUpperCase());\n            // Get updated watchlist\n            const watchlistItems = await (0,_services_database__WEBPACK_IMPORTED_MODULE_1__.getUserWatchlist)(userId);\n            // Return mock data for now\n            const transformedWatchlist = watchlistItems.map((item)=>({\n                    id: item.id,\n                    symbol: item.ticker,\n                    price: generateMockPrice(item.ticker),\n                    change: generateMockChange(),\n                    volume: generateMockVolume(),\n                    watching: true\n                }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: `Removed ${ticker.toUpperCase()} from watchlist`,\n                watchlist: transformedWatchlist\n            });\n        } catch (removeError) {\n            console.error(\"Error removing ticker from watchlist:\", removeError);\n            throw removeError;\n        }\n    } catch (error) {\n        console.error(\"Error removing from watchlist:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server error\",\n            message: error?.message || \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper functions to generate mock data\nfunction generateMockPrice(ticker) {\n    // Generate a pseudo-random but consistent price based on ticker string\n    const sum = ticker.split(\"\").reduce((acc, char)=>acc + char.charCodeAt(0), 0);\n    return Math.floor(50 + sum % 450) + Math.random() * 10;\n}\nfunction generateMockChange() {\n    // Generate a random percent change between -5% and +5%\n    return (Math.random() * 10 - 5).toFixed(2);\n}\nfunction generateMockVolume() {\n    // Generate a random volume string\n    const volume = Math.floor(Math.random() * 20) + 1;\n    const decimal = Math.floor(Math.random() * 9);\n    return `${volume}.${decimal}M`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS93YXRjaGxpc3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDVDtBQUU2QztBQUNuQztBQUV6RCx3Q0FBd0M7QUFDakMsTUFBTU0sVUFBVSxnQkFBZ0I7QUFFdkMsNEJBQTRCO0FBQ3JCLGVBQWVDLElBQUlDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHUiw2REFBT0EsQ0FBQ087UUFFM0IsSUFBSSxDQUFDQyxRQUFRO1lBQ1gsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQ0FBa0MsRUFBRUwsT0FBTyxDQUFDO1FBRXpELGlDQUFpQztRQUNqQyxNQUFNSixzRUFBcUJBLENBQUNJO1FBRTVCLElBQUk7WUFDRiw4QkFBOEI7WUFDOUIsTUFBTU0saUJBQWlCLE1BQU1iLG9FQUFnQkEsQ0FBQ087WUFFOUMsdURBQXVEO1lBQ3ZELHFFQUFxRTtZQUNyRSxNQUFNTyx1QkFBdUJELGVBQWVFLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUztvQkFDdkRDLElBQUlELEtBQUtDLEVBQUU7b0JBQ1hDLFFBQVFGLEtBQUtHLE1BQU07b0JBQ25CQyxPQUFPQyxrQkFBa0JMLEtBQUtHLE1BQU07b0JBQ3BDRyxRQUFRQztvQkFDUkMsUUFBUUM7b0JBQ1JDLFVBQVU7Z0JBQ1o7WUFFQSxPQUFPNUIscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFDdkJtQixTQUFTO2dCQUNUQyxXQUFXZDtZQUNiO1FBQ0YsRUFBRSxPQUFPZSxZQUFZO1lBQ25CbEIsUUFBUUYsS0FBSyxDQUFDLG1DQUFtQ29CO1lBQ2pELDBDQUEwQztZQUMxQyxPQUFPL0IscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFDdkJtQixTQUFTO2dCQUNUQyxXQUFXLEVBQUU7WUFDZjtRQUNGO0lBQ0YsRUFBRSxPQUFPbkIsT0FBWTtRQUNuQkUsUUFBUUYsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsMkNBQTJDO1FBQzNDLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDdkJtQixTQUFTO1lBQ1RDLFdBQVcsRUFBRTtRQUNmO0lBQ0Y7QUFDRjtBQUVBLGdDQUFnQztBQUN6QixlQUFlRSxLQUFLeEIsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUdSLDZEQUFPQSxDQUFDTztRQUUzQixJQUFJLENBQUNDLFFBQVE7WUFDWCxPQUFPVCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWUsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3BFO1FBRUEsTUFBTXFCLE9BQU8sTUFBTXpCLElBQUlFLElBQUk7UUFDM0IsTUFBTSxFQUFFVyxNQUFNLEVBQUUsR0FBR1k7UUFFbkIsSUFBSSxDQUFDWixRQUFRO1lBQ1gsT0FBT3JCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzFFO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG1CQUFtQixFQUFFTyxPQUFPLFdBQVcsRUFBRVosT0FBTyxDQUFDO1FBRTlELGlDQUFpQztRQUNqQyxNQUFNSixzRUFBcUJBLENBQUNJO1FBRTVCLElBQUk7WUFDRiwwQkFBMEI7WUFDMUJJLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9DQUFvQyxFQUFFTCxPQUFPLFVBQVUsRUFBRVksT0FBT2EsV0FBVyxHQUFHLENBQUM7WUFDNUYsTUFBTS9CLGtFQUFjQSxDQUFDTSxRQUFRWSxPQUFPYSxXQUFXO1lBQy9DckIsUUFBUUMsR0FBRyxDQUFDLENBQUMsMEJBQTBCLEVBQUVPLE9BQU9hLFdBQVcsR0FBRyxhQUFhLENBQUM7WUFFNUUsd0JBQXdCO1lBQ3hCLE1BQU1uQixpQkFBaUIsTUFBTWIsb0VBQWdCQSxDQUFDTztZQUM5Q0ksUUFBUUMsR0FBRyxDQUFDLENBQUMsaUNBQWlDLEVBQUVDLGVBQWVvQixNQUFNLENBQUMsTUFBTSxDQUFDO1lBRTdFLDJCQUEyQjtZQUMzQixNQUFNbkIsdUJBQXVCRCxlQUFlRSxHQUFHLENBQUNDLENBQUFBLE9BQVM7b0JBQ3ZEQyxJQUFJRCxLQUFLQyxFQUFFO29CQUNYQyxRQUFRRixLQUFLRyxNQUFNO29CQUNuQkMsT0FBT0Msa0JBQWtCTCxLQUFLRyxNQUFNO29CQUNwQ0csUUFBUUM7b0JBQ1JDLFFBQVFDO29CQUNSQyxVQUFVO2dCQUNaO1lBRUEsT0FBTzVCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQ3ZCbUIsU0FBUztnQkFDVE8sU0FBUyxDQUFDLE1BQU0sRUFBRWYsT0FBT2EsV0FBVyxHQUFHLGFBQWEsQ0FBQztnQkFDckRKLFdBQVdkO1lBQ2I7UUFDRixFQUFFLE9BQU9xQixVQUFVO1lBQ2pCeEIsUUFBUUYsS0FBSyxDQUFDLHFDQUFxQzBCO1lBQ25ELGlFQUFpRTtZQUNqRSxzRUFBc0U7WUFDdEUsTUFBTUMsbUJBQW1CLE1BQU1wQyxvRUFBZ0JBLENBQUNPO1lBQ2hELE1BQU1PLHVCQUF1QnNCLGlCQUFpQnJCLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUztvQkFDekRDLElBQUlELEtBQUtDLEVBQUU7b0JBQ1hDLFFBQVFGLEtBQUtHLE1BQU07b0JBQ25CQyxPQUFPQyxrQkFBa0JMLEtBQUtHLE1BQU07b0JBQ3BDRyxRQUFRQztvQkFDUkMsUUFBUUM7b0JBQ1JDLFVBQVU7Z0JBQ1o7WUFFQSxPQUFPNUIscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFDdkJtQixTQUFTO2dCQUNUTyxTQUFTLENBQUMsY0FBYyxFQUFFZixPQUFPYSxXQUFXLEdBQUcsYUFBYSxDQUFDO2dCQUM3RHZCLE9BQU8sU0FBb0J5QixPQUFPO2dCQUNsQ04sV0FBV2Q7WUFDYixHQUFHO2dCQUFFSixRQUFRO1lBQUksSUFBSSw4Q0FBOEM7UUFDckU7SUFDRixFQUFFLE9BQU9ELE9BQVk7UUFDbkJFLFFBQVFGLEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLDJEQUEyRDtRQUMzRCxPQUFPWCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUNFbUIsU0FBUztZQUNUbEIsT0FBTztZQUNQeUIsU0FBU3pCLE9BQU95QixXQUFXO1lBQzNCTixXQUFXLEVBQUU7UUFDZixHQUNBO1lBQUVsQixRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLHVDQUF1QztBQUNoQyxlQUFlMkIsT0FBTy9CLEdBQWdCO0lBQzNDLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHUiw2REFBT0EsQ0FBQ087UUFFM0IsSUFBSSxDQUFDQyxRQUFRO1lBQ1gsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLE1BQU0sRUFBRTRCLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlqQyxJQUFJa0MsR0FBRztRQUN4QyxNQUFNckIsU0FBU21CLGFBQWFHLEdBQUcsQ0FBQztRQUVoQyxJQUFJLENBQUN0QixRQUFRO1lBQ1gsT0FBT3JCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzFFO1FBRUEsSUFBSTtZQUNGLCtCQUErQjtZQUMvQixNQUFNUix1RUFBbUJBLENBQUNLLFFBQVFZLE9BQU9hLFdBQVc7WUFFcEQsd0JBQXdCO1lBQ3hCLE1BQU1uQixpQkFBaUIsTUFBTWIsb0VBQWdCQSxDQUFDTztZQUU5QywyQkFBMkI7WUFDM0IsTUFBTU8sdUJBQXVCRCxlQUFlRSxHQUFHLENBQUNDLENBQUFBLE9BQVM7b0JBQ3ZEQyxJQUFJRCxLQUFLQyxFQUFFO29CQUNYQyxRQUFRRixLQUFLRyxNQUFNO29CQUNuQkMsT0FBT0Msa0JBQWtCTCxLQUFLRyxNQUFNO29CQUNwQ0csUUFBUUM7b0JBQ1JDLFFBQVFDO29CQUNSQyxVQUFVO2dCQUNaO1lBRUEsT0FBTzVCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQ3ZCbUIsU0FBUztnQkFDVE8sU0FBUyxDQUFDLFFBQVEsRUFBRWYsT0FBT2EsV0FBVyxHQUFHLGVBQWUsQ0FBQztnQkFDekRKLFdBQVdkO1lBQ2I7UUFDRixFQUFFLE9BQU80QixhQUFhO1lBQ3BCL0IsUUFBUUYsS0FBSyxDQUFDLHlDQUF5Q2lDO1lBQ3ZELE1BQU1BO1FBQ1I7SUFDRixFQUFFLE9BQU9qQyxPQUFZO1FBQ25CRSxRQUFRRixLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPWCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1lBQWdCeUIsU0FBU3pCLE9BQU95QixXQUFXO1FBQWdCLEdBQ3BFO1lBQUV4QixRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLHlDQUF5QztBQUN6QyxTQUFTVyxrQkFBa0JGLE1BQWM7SUFDdkMsdUVBQXVFO0lBQ3ZFLE1BQU13QixNQUFNeEIsT0FBT3lCLEtBQUssQ0FBQyxJQUFJQyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsT0FBU0QsTUFBTUMsS0FBS0MsVUFBVSxDQUFDLElBQUk7SUFDN0UsT0FBT0MsS0FBS0MsS0FBSyxDQUFDLEtBQU1QLE1BQU0sT0FBUU0sS0FBS0UsTUFBTSxLQUFLO0FBQ3hEO0FBRUEsU0FBUzVCO0lBQ1AsdURBQXVEO0lBQ3ZELE9BQU8sQ0FBQzBCLEtBQUtFLE1BQU0sS0FBSyxLQUFLLEdBQUdDLE9BQU8sQ0FBQztBQUMxQztBQUVBLFNBQVMzQjtJQUNQLGtDQUFrQztJQUNsQyxNQUFNRCxTQUFTeUIsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUssTUFBTTtJQUNoRCxNQUFNRSxVQUFVSixLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSztJQUMzQyxPQUFPLENBQUMsRUFBRTNCLE9BQU8sQ0FBQyxFQUFFNkIsUUFBUSxDQUFDLENBQUM7QUFDaEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9jay1hbmFseXRpY3MtZGFzaGJvYXJkLy4vc3JjL2FwcC9hcGkvd2F0Y2hsaXN0L3JvdXRlLnRzP2JiNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tICdAY2xlcmsvbmV4dGpzL3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0VXNlcldhdGNobGlzdCwgYWRkVG9XYXRjaGxpc3QsIHJlbW92ZUZyb21XYXRjaGxpc3QgfSBmcm9tICdAL3NlcnZpY2VzL2RhdGFiYXNlJztcbmltcG9ydCB7IGNyZWF0ZVVzZXJJZk5vdEV4aXN0cyB9IGZyb20gJ0Avc2VydmljZXMvdXNlcnMnO1xuXG4vLyBGb3JjZSBkeW5hbWljIHRvIGF2b2lkIGNhY2hpbmcgaXNzdWVzXG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJztcblxuLy8gR0VUOiBHZXQgdXNlcidzIHdhdGNobGlzdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGdldEF1dGgocmVxKTtcbiAgICBcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEFQSTogRmV0Y2hpbmcgd2F0Y2hsaXN0IGZvciB1c2VyOiAke3VzZXJJZH1gKTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdXNlciBleGlzdHMgaW4gU3VwYWJhc2VcbiAgICBhd2FpdCBjcmVhdGVVc2VySWZOb3RFeGlzdHModXNlcklkKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHdhdGNobGlzdCBmcm9tIFN1cGFiYXNlXG4gICAgICBjb25zdCB3YXRjaGxpc3RJdGVtcyA9IGF3YWl0IGdldFVzZXJXYXRjaGxpc3QodXNlcklkKTtcbiAgICAgIFxuICAgICAgLy8gVGVtcG9yYXJpbHkgZ2VuZXJhdGUgbW9jayBwcmljZSBkYXRhIGZvciBlYWNoIHRpY2tlclxuICAgICAgLy8gVW50aWwgd2Ugc2V0IHVwIHRoZSBzdG9ja19pbmZvIHRhYmxlIG9yIHVzZSBhIHJlYWwgbWFya2V0IGRhdGEgQVBJXG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZFdhdGNobGlzdCA9IHdhdGNobGlzdEl0ZW1zLm1hcChpdGVtID0+ICh7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICBzeW1ib2w6IGl0ZW0udGlja2VyLFxuICAgICAgICBwcmljZTogZ2VuZXJhdGVNb2NrUHJpY2UoaXRlbS50aWNrZXIpLFxuICAgICAgICBjaGFuZ2U6IGdlbmVyYXRlTW9ja0NoYW5nZSgpLFxuICAgICAgICB2b2x1bWU6IGdlbmVyYXRlTW9ja1ZvbHVtZSgpLFxuICAgICAgICB3YXRjaGluZzogdHJ1ZVxuICAgICAgfSkpO1xuICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgICAgd2F0Y2hsaXN0OiB0cmFuc2Zvcm1lZFdhdGNobGlzdFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZmV0Y2hFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd2F0Y2hsaXN0IGl0ZW1zOicsIGZldGNoRXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIGVtcHR5IHdhdGNobGlzdCBpbnN0ZWFkIG9mIGVycm9yXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIHdhdGNobGlzdDogW11cbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHdhdGNobGlzdCBBUEk6JywgZXJyb3IpO1xuICAgIC8vIFJldHVybiBlbXB0eSB3YXRjaGxpc3QgcmF0aGVyIHRoYW4gZXJyb3JcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgd2F0Y2hsaXN0OiBbXSBcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBQT1NUOiBBZGQgdGlja2VyIHRvIHdhdGNobGlzdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSBnZXRBdXRoKHJlcSk7XG4gICAgXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IHsgdGlja2VyIH0gPSBkYXRhO1xuICAgIFxuICAgIGlmICghdGlja2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1RpY2tlciBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgQVBJOiBBZGRpbmcgdGlja2VyICR7dGlja2VyfSBmb3IgdXNlcjogJHt1c2VySWR9YCk7XG5cbiAgICAvLyBFbnN1cmUgdXNlciBleGlzdHMgaW4gU3VwYWJhc2VcbiAgICBhd2FpdCBjcmVhdGVVc2VySWZOb3RFeGlzdHModXNlcklkKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQWRkIHRpY2tlciB0byB3YXRjaGxpc3RcbiAgICAgIGNvbnNvbGUubG9nKGBDYWxsaW5nIGFkZFRvV2F0Y2hsaXN0IHdpdGggdXNlcklkOiAke3VzZXJJZH0sIHRpY2tlcjogJHt0aWNrZXIudG9VcHBlckNhc2UoKX1gKTtcbiAgICAgIGF3YWl0IGFkZFRvV2F0Y2hsaXN0KHVzZXJJZCwgdGlja2VyLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBhZGRlZCB0aWNrZXIgJHt0aWNrZXIudG9VcHBlckNhc2UoKX0gdG8gd2F0Y2hsaXN0YCk7XG4gICAgICBcbiAgICAgIC8vIEdldCB1cGRhdGVkIHdhdGNobGlzdFxuICAgICAgY29uc3Qgd2F0Y2hsaXN0SXRlbXMgPSBhd2FpdCBnZXRVc2VyV2F0Y2hsaXN0KHVzZXJJZCk7XG4gICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkIHVwZGF0ZWQgd2F0Y2hsaXN0IHdpdGggJHt3YXRjaGxpc3RJdGVtcy5sZW5ndGh9IGl0ZW1zYCk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBtb2NrIGRhdGEgZm9yIG5vd1xuICAgICAgY29uc3QgdHJhbnNmb3JtZWRXYXRjaGxpc3QgPSB3YXRjaGxpc3RJdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgc3ltYm9sOiBpdGVtLnRpY2tlcixcbiAgICAgICAgcHJpY2U6IGdlbmVyYXRlTW9ja1ByaWNlKGl0ZW0udGlja2VyKSxcbiAgICAgICAgY2hhbmdlOiBnZW5lcmF0ZU1vY2tDaGFuZ2UoKSxcbiAgICAgICAgdm9sdW1lOiBnZW5lcmF0ZU1vY2tWb2x1bWUoKSxcbiAgICAgICAgd2F0Y2hpbmc6IHRydWVcbiAgICAgIH0pKTtcbiAgXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIG1lc3NhZ2U6IGBBZGRlZCAke3RpY2tlci50b1VwcGVyQ2FzZSgpfSB0byB3YXRjaGxpc3RgLFxuICAgICAgICB3YXRjaGxpc3Q6IHRyYW5zZm9ybWVkV2F0Y2hsaXN0XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChhZGRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIHRpY2tlciB0byB3YXRjaGxpc3Q6JywgYWRkRXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIDIwMCB3aXRoIGN1cnJlbnQgd2F0Y2hsaXN0IGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3JcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgbmF2aWdhdGlvbiBvbiBlcnJvciBidXQgc3RpbGwgc2hvd3MgdGhlIGVycm9yIGluIGxvZ3NcbiAgICAgIGNvbnN0IGN1cnJlbnRXYXRjaGxpc3QgPSBhd2FpdCBnZXRVc2VyV2F0Y2hsaXN0KHVzZXJJZCk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZFdhdGNobGlzdCA9IGN1cnJlbnRXYXRjaGxpc3QubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHN5bWJvbDogaXRlbS50aWNrZXIsXG4gICAgICAgIHByaWNlOiBnZW5lcmF0ZU1vY2tQcmljZShpdGVtLnRpY2tlciksXG4gICAgICAgIGNoYW5nZTogZ2VuZXJhdGVNb2NrQ2hhbmdlKCksXG4gICAgICAgIHZvbHVtZTogZ2VuZXJhdGVNb2NrVm9sdW1lKCksXG4gICAgICAgIHdhdGNoaW5nOiB0cnVlXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIGFkZCAke3RpY2tlci50b1VwcGVyQ2FzZSgpfSB0byB3YXRjaGxpc3RgLFxuICAgICAgICBlcnJvcjogKGFkZEVycm9yIGFzIEVycm9yKS5tZXNzYWdlLFxuICAgICAgICB3YXRjaGxpc3Q6IHRyYW5zZm9ybWVkV2F0Y2hsaXN0XG4gICAgICB9LCB7IHN0YXR1czogMjAwIH0pOyAvLyBTdGlsbCByZXR1cm4gMjAwIHRvIHByZXZlbnQgcGFnZSBuYXZpZ2F0aW9uXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gUE9TVCAvYXBpL3dhdGNobGlzdDonLCBlcnJvcik7XG4gICAgLy8gUmV0dXJuIDIwMCB3aXRoIGVycm9yIG1lc3NhZ2UgdG8gcHJldmVudCBwYWdlIG5hdmlnYXRpb25cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnU2VydmVyIGVycm9yJywgXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJyxcbiAgICAgICAgd2F0Y2hsaXN0OiBbXSBcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogMjAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIERFTEVURTogUmVtb3ZlIHRpY2tlciBmcm9tIHdhdGNobGlzdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGdldEF1dGgocmVxKTtcbiAgICBcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3QgdGlja2VyID0gc2VhcmNoUGFyYW1zLmdldCgndGlja2VyJyk7XG4gICAgXG4gICAgaWYgKCF0aWNrZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVGlja2VyIGlzIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBSZW1vdmUgdGlja2VyIGZyb20gd2F0Y2hsaXN0XG4gICAgICBhd2FpdCByZW1vdmVGcm9tV2F0Y2hsaXN0KHVzZXJJZCwgdGlja2VyLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgXG4gICAgICAvLyBHZXQgdXBkYXRlZCB3YXRjaGxpc3RcbiAgICAgIGNvbnN0IHdhdGNobGlzdEl0ZW1zID0gYXdhaXQgZ2V0VXNlcldhdGNobGlzdCh1c2VySWQpO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gbW9jayBkYXRhIGZvciBub3dcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkV2F0Y2hsaXN0ID0gd2F0Y2hsaXN0SXRlbXMubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHN5bWJvbDogaXRlbS50aWNrZXIsXG4gICAgICAgIHByaWNlOiBnZW5lcmF0ZU1vY2tQcmljZShpdGVtLnRpY2tlciksXG4gICAgICAgIGNoYW5nZTogZ2VuZXJhdGVNb2NrQ2hhbmdlKCksXG4gICAgICAgIHZvbHVtZTogZ2VuZXJhdGVNb2NrVm9sdW1lKCksXG4gICAgICAgIHdhdGNoaW5nOiB0cnVlXG4gICAgICB9KSk7XG4gIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgICBtZXNzYWdlOiBgUmVtb3ZlZCAke3RpY2tlci50b1VwcGVyQ2FzZSgpfSBmcm9tIHdhdGNobGlzdGAsXG4gICAgICAgIHdhdGNobGlzdDogdHJhbnNmb3JtZWRXYXRjaGxpc3RcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKHJlbW92ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyB0aWNrZXIgZnJvbSB3YXRjaGxpc3Q6JywgcmVtb3ZlRXJyb3IpO1xuICAgICAgdGhyb3cgcmVtb3ZlRXJyb3I7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3ZpbmcgZnJvbSB3YXRjaGxpc3Q6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InLCBtZXNzYWdlOiBlcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB0byBnZW5lcmF0ZSBtb2NrIGRhdGFcbmZ1bmN0aW9uIGdlbmVyYXRlTW9ja1ByaWNlKHRpY2tlcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgLy8gR2VuZXJhdGUgYSBwc2V1ZG8tcmFuZG9tIGJ1dCBjb25zaXN0ZW50IHByaWNlIGJhc2VkIG9uIHRpY2tlciBzdHJpbmdcbiAgY29uc3Qgc3VtID0gdGlja2VyLnNwbGl0KCcnKS5yZWR1Y2UoKGFjYywgY2hhcikgPT4gYWNjICsgY2hhci5jaGFyQ29kZUF0KDApLCAwKTtcbiAgcmV0dXJuIE1hdGguZmxvb3IoNTAgKyAoc3VtICUgNDUwKSkgKyBNYXRoLnJhbmRvbSgpICogMTA7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTW9ja0NoYW5nZSgpOiBudW1iZXIge1xuICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSBwZXJjZW50IGNoYW5nZSBiZXR3ZWVuIC01JSBhbmQgKzUlXG4gIHJldHVybiAoTWF0aC5yYW5kb20oKSAqIDEwIC0gNSkudG9GaXhlZCgyKSBhcyB1bmtub3duIGFzIG51bWJlcjtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVNb2NrVm9sdW1lKCk6IHN0cmluZyB7XG4gIC8vIEdlbmVyYXRlIGEgcmFuZG9tIHZvbHVtZSBzdHJpbmdcbiAgY29uc3Qgdm9sdW1lID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjApICsgMTtcbiAgY29uc3QgZGVjaW1hbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDkpO1xuICByZXR1cm4gYCR7dm9sdW1lfS4ke2RlY2ltYWx9TWA7XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRBdXRoIiwiZ2V0VXNlcldhdGNobGlzdCIsImFkZFRvV2F0Y2hsaXN0IiwicmVtb3ZlRnJvbVdhdGNobGlzdCIsImNyZWF0ZVVzZXJJZk5vdEV4aXN0cyIsImR5bmFtaWMiLCJHRVQiLCJyZXEiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwid2F0Y2hsaXN0SXRlbXMiLCJ0cmFuc2Zvcm1lZFdhdGNobGlzdCIsIm1hcCIsIml0ZW0iLCJpZCIsInN5bWJvbCIsInRpY2tlciIsInByaWNlIiwiZ2VuZXJhdGVNb2NrUHJpY2UiLCJjaGFuZ2UiLCJnZW5lcmF0ZU1vY2tDaGFuZ2UiLCJ2b2x1bWUiLCJnZW5lcmF0ZU1vY2tWb2x1bWUiLCJ3YXRjaGluZyIsInN1Y2Nlc3MiLCJ3YXRjaGxpc3QiLCJmZXRjaEVycm9yIiwiUE9TVCIsImRhdGEiLCJ0b1VwcGVyQ2FzZSIsImxlbmd0aCIsIm1lc3NhZ2UiLCJhZGRFcnJvciIsImN1cnJlbnRXYXRjaGxpc3QiLCJERUxFVEUiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJnZXQiLCJyZW1vdmVFcnJvciIsInN1bSIsInNwbGl0IiwicmVkdWNlIiwiYWNjIiwiY2hhciIsImNoYXJDb2RlQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b0ZpeGVkIiwiZGVjaW1hbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/watchlist/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Environment variables for client-side Supabase access\nconst supabaseUrl = \"https://xtvfaileukqrdnnfghui.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0dmZhaWxldWtxcmRubmZnaHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NjIwMjUsImV4cCI6MjA1NjEzODAyNX0.cePSYKeWbyeSicflzbMyF5a344IkCMTsSKwv-7J0_AI\";\n// Validate environment variables\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase environment variables for client-side access\");\n}\n// Create and export the Supabase client\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl || \"\", supabaseAnonKey || \"\", {\n    auth: {\n        persistSession: true\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBR3JELHdEQUF3RDtBQUN4RCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakUsaUNBQWlDO0FBQ2pDLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxpQkFBaUI7SUFDcENFLFFBQVFDLEtBQUssQ0FBQztBQUNoQjtBQUVBLHdDQUF3QztBQUNqQyxNQUFNQyxXQUFXVCxtRUFBWUEsQ0FDbENDLGVBQWUsSUFDZkksbUJBQW1CLElBQ25CO0lBQ0VLLE1BQU07UUFDSkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsR0FDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0b2NrLWFuYWx5dGljcy1kYXNoYm9hcmQvLi9zcmMvbGliL3N1cGFiYXNlLnRzPzA2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2UgfSBmcm9tICcuLi90eXBlcy9zdXBhYmFzZSc7XG5cbi8vIEVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgY2xpZW50LXNpZGUgU3VwYWJhc2UgYWNjZXNzXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBhcyBzdHJpbmc7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBhcyBzdHJpbmc7XG5cbi8vIFZhbGlkYXRlIGVudmlyb25tZW50IHZhcmlhYmxlc1xuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBjbGllbnQtc2lkZSBhY2Nlc3MnKTtcbn1cblxuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIFN1cGFiYXNlIGNsaWVudFxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50PERhdGFiYXNlPihcbiAgc3VwYWJhc2VVcmwgfHwgJycsXG4gIHN1cGFiYXNlQW5vbktleSB8fCAnJyxcbiAge1xuICAgIGF1dGg6IHtcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiB0cnVlLFxuICAgIH0sXG4gIH1cbik7ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsInN1cGFiYXNlIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/server.ts":
/*!************************************!*\
  !*** ./src/lib/supabase/server.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   createClientWithAuth: () => (/* binding */ createClientWithAuth)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Cache the Supabase client to avoid creating a new client for every call\nlet supabaseClient = null;\n/**\n * Creates a Supabase client with the service role key for server operations\n * This gives full access to the database, so it should only be used in server contexts\n */ function createClient() {\n    // Return the cached client if it exists\n    if (supabaseClient) {\n        return supabaseClient;\n    }\n    // Check environment variables\n    const supabaseUrl = \"https://xtvfaileukqrdnnfghui.supabase.co\";\n    const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    // If we're in development and missing the service role key but have the anon key,\n    // use that as a fallback with a warning\n    const isDev = \"development\" === \"development\";\n    if (!supabaseUrl) {\n        console.error(\"Missing Supabase URL\");\n        if (isDev) {\n            return createMockClient();\n        }\n        throw new Error(\"Missing Supabase URL\");\n    }\n    if (!supabaseKey) {\n        console.warn(\"Missing SUPABASE_SERVICE_ROLE_KEY - using fallback in development mode\");\n        if (isDev) {\n            // In development, use the anon key if available as fallback\n            const fallbackKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0dmZhaWxldWtxcmRubmZnaHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NjIwMjUsImV4cCI6MjA1NjEzODAyNX0.cePSYKeWbyeSicflzbMyF5a344IkCMTsSKwv-7J0_AI\";\n            if (fallbackKey) {\n                console.info(\"Using NEXT_PUBLIC_SUPABASE_ANON_KEY as fallback for development\");\n                supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, fallbackKey, {\n                    auth: {\n                        persistSession: false,\n                        autoRefreshToken: false\n                    }\n                });\n                return supabaseClient;\n            }\n            return createMockClient();\n        }\n        throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable\");\n    }\n    // Create a new client with the service role key\n    supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey, {\n        auth: {\n            persistSession: false,\n            autoRefreshToken: false\n        }\n    });\n    return supabaseClient;\n}\n/**\n * Creates a mock Supabase client for development when keys aren't available\n * This allows the application to run without a real Supabase connection\n */ function createMockClient() {\n    console.info(\"Creating mock Supabase client for development\");\n    // Return a mocked client that doesn't throw errors\n    return {\n        from: ()=>({\n                select: ()=>({\n                        eq: ()=>({\n                                single: async ()=>({\n                                        data: null,\n                                        error: null\n                                    }),\n                                execute: async ()=>({\n                                        data: [],\n                                        error: null\n                                    })\n                            }),\n                        execute: async ()=>({\n                                data: [],\n                                error: null\n                            })\n                    }),\n                insert: async ()=>({\n                        data: null,\n                        error: null\n                    }),\n                update: async ()=>({\n                        data: null,\n                        error: null\n                    }),\n                delete: async ()=>({\n                        data: null,\n                        error: null\n                    })\n            })\n    };\n}\n/**\n * Helper function to create a client for a specific user with their auth token\n * This is useful for operations that should be performed with the user's permissions\n */ function createClientWithAuth(supabaseAccessToken) {\n    const supabaseUrl = \"https://xtvfaileukqrdnnfghui.supabase.co\";\n    const supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0dmZhaWxldWtxcmRubmZnaHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NjIwMjUsImV4cCI6MjA1NjEzODAyNX0.cePSYKeWbyeSicflzbMyF5a344IkCMTsSKwv-7J0_AI\";\n    if (!supabaseUrl || !supabaseAnonKey) {\n        console.error(\"Missing Supabase environment variables\");\n        if (true) {\n            return createMockClient();\n        }\n        throw new Error(\"Missing Supabase environment variables\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n        global: {\n            headers: {\n                Authorization: `Bearer ${supabaseAccessToken}`\n            }\n        },\n        auth: {\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlL3NlcnZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUU7QUFHekUsMEVBQTBFO0FBQzFFLElBQUlFLGlCQUF1RTtBQUUzRTs7O0NBR0MsR0FDTSxTQUFTRjtJQUNkLHdDQUF3QztJQUN4QyxJQUFJRSxnQkFBZ0I7UUFDbEIsT0FBT0E7SUFDVDtJQUVBLDhCQUE4QjtJQUM5QixNQUFNQyxjQUFjQywwQ0FBb0M7SUFDeEQsTUFBTUcsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyx5QkFBeUI7SUFFekQsa0ZBQWtGO0lBQ2xGLHdDQUF3QztJQUN4QyxNQUFNQyxRQUFRTCxrQkFBeUI7SUFFdkMsSUFBSSxDQUFDRCxhQUFhO1FBQ2hCTyxRQUFRQyxLQUFLLENBQUM7UUFDZCxJQUFJRixPQUFPO1lBQ1QsT0FBT0c7UUFDVDtRQUNBLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLElBQUksQ0FBQ04sYUFBYTtRQUNoQkcsUUFBUUksSUFBSSxDQUFDO1FBQ2IsSUFBSUwsT0FBTztZQUNULDREQUE0RDtZQUM1RCxNQUFNTSxjQUFjWCxrTkFBeUM7WUFDN0QsSUFBSVcsYUFBYTtnQkFDZkwsUUFBUU8sSUFBSSxDQUFDO2dCQUNiZixpQkFBaUJELG1FQUFnQkEsQ0FBV0UsYUFBYVksYUFBYTtvQkFDcEVHLE1BQU07d0JBQ0pDLGdCQUFnQjt3QkFDaEJDLGtCQUFrQjtvQkFDcEI7Z0JBQ0Y7Z0JBQ0EsT0FBT2xCO1lBQ1Q7WUFFQSxPQUFPVTtRQUNUO1FBRUEsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsZ0RBQWdEO0lBQ2hEWCxpQkFBaUJELG1FQUFnQkEsQ0FBV0UsYUFBYUksYUFBYTtRQUNwRVcsTUFBTTtZQUNKQyxnQkFBZ0I7WUFDaEJDLGtCQUFrQjtRQUNwQjtJQUNGO0lBRUEsT0FBT2xCO0FBQ1Q7QUFFQTs7O0NBR0MsR0FDRCxTQUFTVTtJQUNQRixRQUFRTyxJQUFJLENBQUM7SUFDYixtREFBbUQ7SUFDbkQsT0FBTztRQUNMSSxNQUFNLElBQU87Z0JBQ1hDLFFBQVEsSUFBTzt3QkFDYkMsSUFBSSxJQUFPO2dDQUNUQyxRQUFRLFVBQWE7d0NBQUVDLE1BQU07d0NBQU1kLE9BQU87b0NBQUs7Z0NBQy9DZSxTQUFTLFVBQWE7d0NBQUVELE1BQU0sRUFBRTt3Q0FBRWQsT0FBTztvQ0FBSzs0QkFDaEQ7d0JBQ0FlLFNBQVMsVUFBYTtnQ0FBRUQsTUFBTSxFQUFFO2dDQUFFZCxPQUFPOzRCQUFLO29CQUNoRDtnQkFDQWdCLFFBQVEsVUFBYTt3QkFBRUYsTUFBTTt3QkFBTWQsT0FBTztvQkFBSztnQkFDL0NpQixRQUFRLFVBQWE7d0JBQUVILE1BQU07d0JBQU1kLE9BQU87b0JBQUs7Z0JBQy9Da0IsUUFBUSxVQUFhO3dCQUFFSixNQUFNO3dCQUFNZCxPQUFPO29CQUFLO1lBQ2pEO0lBQ0Y7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNtQixxQkFBcUJDLG1CQUEyQjtJQUM5RCxNQUFNNUIsY0FBY0MsMENBQW9DO0lBQ3hELE1BQU00QixrQkFBa0I1QixrTkFBeUM7SUFFakUsSUFBSSxDQUFDRCxlQUFlLENBQUM2QixpQkFBaUI7UUFDcEN0QixRQUFRQyxLQUFLLENBQUM7UUFDZCxJQUFJUCxJQUF5QixFQUFlO1lBQzFDLE9BQU9RO1FBQ1Q7UUFDQSxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxPQUFPWixtRUFBZ0JBLENBQVdFLGFBQWE2QixpQkFBaUI7UUFDOURDLFFBQVE7WUFDTkMsU0FBUztnQkFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRUosb0JBQW9CLENBQUM7WUFDaEQ7UUFDRjtRQUNBYixNQUFNO1lBQ0pDLGdCQUFnQjtRQUNsQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9jay1hbmFseXRpY3MtZGFzaGJvYXJkLy4vc3JjL2xpYi9zdXBhYmFzZS9zZXJ2ZXIudHM/MmU4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgYXMgY3JlYXRlQ2xpZW50QmFzZSB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgdHlwZSB7IERhdGFiYXNlIH0gZnJvbSAnLi4vLi4vdHlwZXMvc3VwYWJhc2UnO1xuXG4vLyBDYWNoZSB0aGUgU3VwYWJhc2UgY2xpZW50IHRvIGF2b2lkIGNyZWF0aW5nIGEgbmV3IGNsaWVudCBmb3IgZXZlcnkgY2FsbFxubGV0IHN1cGFiYXNlQ2xpZW50OiBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVDbGllbnRCYXNlPERhdGFiYXNlPj4gfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgU3VwYWJhc2UgY2xpZW50IHdpdGggdGhlIHNlcnZpY2Ugcm9sZSBrZXkgZm9yIHNlcnZlciBvcGVyYXRpb25zXG4gKiBUaGlzIGdpdmVzIGZ1bGwgYWNjZXNzIHRvIHRoZSBkYXRhYmFzZSwgc28gaXQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBzZXJ2ZXIgY29udGV4dHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsaWVudCgpIHtcbiAgLy8gUmV0dXJuIHRoZSBjYWNoZWQgY2xpZW50IGlmIGl0IGV4aXN0c1xuICBpZiAoc3VwYWJhc2VDbGllbnQpIHtcbiAgICByZXR1cm4gc3VwYWJhc2VDbGllbnQ7XG4gIH1cbiAgXG4gIC8vIENoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbiAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBcbiAgLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQgYW5kIG1pc3NpbmcgdGhlIHNlcnZpY2Ugcm9sZSBrZXkgYnV0IGhhdmUgdGhlIGFub24ga2V5LFxuICAvLyB1c2UgdGhhdCBhcyBhIGZhbGxiYWNrIHdpdGggYSB3YXJuaW5nXG4gIGNvbnN0IGlzRGV2ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG4gIFxuICBpZiAoIXN1cGFiYXNlVXJsKSB7XG4gICAgY29uc29sZS5lcnJvcignTWlzc2luZyBTdXBhYmFzZSBVUkwnKTtcbiAgICBpZiAoaXNEZXYpIHtcbiAgICAgIHJldHVybiBjcmVhdGVNb2NrQ2xpZW50KCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBVUkwnKTtcbiAgfVxuICBcbiAgaWYgKCFzdXBhYmFzZUtleSkge1xuICAgIGNvbnNvbGUud2FybignTWlzc2luZyBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIC0gdXNpbmcgZmFsbGJhY2sgaW4gZGV2ZWxvcG1lbnQgbW9kZScpO1xuICAgIGlmIChpc0Rldikge1xuICAgICAgLy8gSW4gZGV2ZWxvcG1lbnQsIHVzZSB0aGUgYW5vbiBrZXkgaWYgYXZhaWxhYmxlIGFzIGZhbGxiYWNrXG4gICAgICBjb25zdCBmYWxsYmFja0tleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuICAgICAgaWYgKGZhbGxiYWNrS2V5KSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbygnVXNpbmcgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgYXMgZmFsbGJhY2sgZm9yIGRldmVsb3BtZW50Jyk7XG4gICAgICAgIHN1cGFiYXNlQ2xpZW50ID0gY3JlYXRlQ2xpZW50QmFzZTxEYXRhYmFzZT4oc3VwYWJhc2VVcmwsIGZhbGxiYWNrS2V5LCB7XG4gICAgICAgICAgYXV0aDoge1xuICAgICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdXBhYmFzZUNsaWVudDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGNyZWF0ZU1vY2tDbGllbnQoKTtcbiAgICB9XG4gICAgXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcbiAgfVxuICBcbiAgLy8gQ3JlYXRlIGEgbmV3IGNsaWVudCB3aXRoIHRoZSBzZXJ2aWNlIHJvbGUga2V5XG4gIHN1cGFiYXNlQ2xpZW50ID0gY3JlYXRlQ2xpZW50QmFzZTxEYXRhYmFzZT4oc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5LCB7XG4gICAgYXV0aDoge1xuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLCAvLyBObyBuZWVkIHRvIHBlcnNpc3Qgc2Vzc2lvbnMgaW4gc2VydmVyIGNvbnRleHRzXG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICB9LFxuICB9KTtcbiAgXG4gIHJldHVybiBzdXBhYmFzZUNsaWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbW9jayBTdXBhYmFzZSBjbGllbnQgZm9yIGRldmVsb3BtZW50IHdoZW4ga2V5cyBhcmVuJ3QgYXZhaWxhYmxlXG4gKiBUaGlzIGFsbG93cyB0aGUgYXBwbGljYXRpb24gdG8gcnVuIHdpdGhvdXQgYSByZWFsIFN1cGFiYXNlIGNvbm5lY3Rpb25cbiAqL1xuZnVuY3Rpb24gY3JlYXRlTW9ja0NsaWVudCgpIHtcbiAgY29uc29sZS5pbmZvKCdDcmVhdGluZyBtb2NrIFN1cGFiYXNlIGNsaWVudCBmb3IgZGV2ZWxvcG1lbnQnKTtcbiAgLy8gUmV0dXJuIGEgbW9ja2VkIGNsaWVudCB0aGF0IGRvZXNuJ3QgdGhyb3cgZXJyb3JzXG4gIHJldHVybiB7XG4gICAgZnJvbTogKCkgPT4gKHtcbiAgICAgIHNlbGVjdDogKCkgPT4gKHtcbiAgICAgICAgZXE6ICgpID0+ICh7XG4gICAgICAgICAgc2luZ2xlOiBhc3luYyAoKSA9PiAoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSxcbiAgICAgICAgICBleGVjdXRlOiBhc3luYyAoKSA9PiAoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXG4gICAgICAgIH0pLFxuICAgICAgICBleGVjdXRlOiBhc3luYyAoKSA9PiAoeyBkYXRhOiBbXSwgZXJyb3I6IG51bGwgfSksXG4gICAgICB9KSxcbiAgICAgIGluc2VydDogYXN5bmMgKCkgPT4gKHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfSksXG4gICAgICB1cGRhdGU6IGFzeW5jICgpID0+ICh7IGRhdGE6IG51bGwsIGVycm9yOiBudWxsIH0pLFxuICAgICAgZGVsZXRlOiBhc3luYyAoKSA9PiAoeyBkYXRhOiBudWxsLCBlcnJvcjogbnVsbCB9KSxcbiAgICB9KSxcbiAgfSBhcyBhbnk7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGNsaWVudCBmb3IgYSBzcGVjaWZpYyB1c2VyIHdpdGggdGhlaXIgYXV0aCB0b2tlblxuICogVGhpcyBpcyB1c2VmdWwgZm9yIG9wZXJhdGlvbnMgdGhhdCBzaG91bGQgYmUgcGVyZm9ybWVkIHdpdGggdGhlIHVzZXIncyBwZXJtaXNzaW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2xpZW50V2l0aEF1dGgoc3VwYWJhc2VBY2Nlc3NUb2tlbjogc3RyaW5nKSB7XG4gIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuICBjb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcbiAgXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICByZXR1cm4gY3JlYXRlTW9ja0NsaWVudCgpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gIH1cbiAgXG4gIHJldHVybiBjcmVhdGVDbGllbnRCYXNlPERhdGFiYXNlPihzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gICAgZ2xvYmFsOiB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzdXBhYmFzZUFjY2Vzc1Rva2VufWAsXG4gICAgICB9LFxuICAgIH0sXG4gICAgYXV0aDoge1xuICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgIH0sXG4gIH0pO1xufSAiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY3JlYXRlQ2xpZW50QmFzZSIsInN1cGFiYXNlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiaXNEZXYiLCJjb25zb2xlIiwiZXJyb3IiLCJjcmVhdGVNb2NrQ2xpZW50IiwiRXJyb3IiLCJ3YXJuIiwiZmFsbGJhY2tLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImluZm8iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiZGF0YSIsImV4ZWN1dGUiLCJpbnNlcnQiLCJ1cGRhdGUiLCJkZWxldGUiLCJjcmVhdGVDbGllbnRXaXRoQXV0aCIsInN1cGFiYXNlQWNjZXNzVG9rZW4iLCJzdXBhYmFzZUFub25LZXkiLCJnbG9iYWwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/server.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/database.ts":
/*!**********************************!*\
  !*** ./src/services/database.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToWatchlist: () => (/* binding */ addToWatchlist),\n/* harmony export */   getDarkPoolActivity: () => (/* binding */ getDarkPoolActivity),\n/* harmony export */   getHedgeFundHoldings: () => (/* binding */ getHedgeFundHoldings),\n/* harmony export */   getInsiderTrades: () => (/* binding */ getInsiderTrades),\n/* harmony export */   getMarketIndicators: () => (/* binding */ getMarketIndicators),\n/* harmony export */   getOptionsFlowData: () => (/* binding */ getOptionsFlowData),\n/* harmony export */   getStockById: () => (/* binding */ getStockById),\n/* harmony export */   getStocks: () => (/* binding */ getStocks),\n/* harmony export */   getUserWatchlist: () => (/* binding */ getUserWatchlist),\n/* harmony export */   removeFromWatchlist: () => (/* binding */ removeFromWatchlist)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./src/lib/supabase/server.ts\");\n\n\n// ======== Stock Info ========\nasync function getStocks() {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"stock_info\").select(\"*\");\n    if (error) throw error;\n    return data || [];\n}\nasync function getStockById(ticker) {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"stock_info\").select(\"*\").eq(\"ticker\", ticker).single();\n    if (error) throw error;\n    return data;\n}\n// ======== Insider Trading ========\nasync function getInsiderTrades(limit = 10) {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"insider_trades\").select(\"*\").order(\"transaction_date\", {\n        ascending: false\n    }).limit(limit);\n    if (error) throw error;\n    return data || [];\n}\n// ======== Hedge Fund Holdings ========\nasync function getHedgeFundHoldings(limit = 10) {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"hedge_fund_holdings\").select(\"*\").order(\"filing_date\", {\n        ascending: false\n    }).limit(limit);\n    if (error) throw error;\n    return data || [];\n}\n// ======== Options Flow ========\nasync function getOptionsFlowData(limit = 10) {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"option_flow_data\").select(\"*\").order(\"date\", {\n        ascending: false\n    }).limit(limit);\n    if (error) throw error;\n    return data || [];\n}\n// ======== Dark Pool Data ========\nasync function getDarkPoolActivity(limit = 10) {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"dark_pool_data\").select(\"*\").order(\"data_date\", {\n        ascending: false\n    }).limit(limit);\n    if (error) throw error;\n    return data || [];\n}\n// ======== Market Indicators ========\nasync function getMarketIndicators() {\n    const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"market_indicators\").select(\"*\");\n    if (error) throw error;\n    return data || [];\n}\n// ======== User Watchlist ========\nasync function getUserWatchlist(userId) {\n    // For reading watchlist items, we can use the server client to bypass RLS\n    const supabaseServer = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    const { data, error } = await supabaseServer.from(\"watchlists\").select(\"*\").eq(\"user_id\", userId);\n    if (error) throw error;\n    return data || [];\n}\nasync function addToWatchlist(userId, ticker) {\n    // Use server client to bypass RLS for inserting\n    const supabaseServer = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    const { error } = await supabaseServer.from(\"watchlists\").insert({\n        user_id: userId,\n        ticker\n    });\n    if (error) throw error;\n}\nasync function removeFromWatchlist(userId, ticker) {\n    // Use server client to bypass RLS for deleting\n    const supabaseServer = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    const { error } = await supabaseServer.from(\"watchlists\").delete().eq(\"user_id\", userId).eq(\"ticker\", ticker);\n    if (error) throw error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZUFBZW1CLGVBQWVGLE1BQWMsRUFBRVosTUFBYztJQUNqRSxnREFBZ0Q7SUFDaEQsTUFBTWEsaUJBQWlCcEIsa0VBQVlBO0lBQ25DLE1BQU0sRUFBRUcsS0FBSyxFQUFFLEdBQUcsTUFBTWlCLGVBQ3JCaEIsSUFBSSxDQUFDLGNBQ0xrQixNQUFNLENBQUM7UUFBRUMsU0FBU0o7UUFBUVo7SUFBTztJQUVwQyxJQUFJSixPQUFPLE1BQU1BO0FBQ25CO0FBRU8sZUFBZXFCLG9CQUFvQkwsTUFBYyxFQUFFWixNQUFjO0lBQ3RFLCtDQUErQztJQUMvQyxNQUFNYSxpQkFBaUJwQixrRUFBWUE7SUFDbkMsTUFBTSxFQUFFRyxLQUFLLEVBQUUsR0FBRyxNQUFNaUIsZUFDckJoQixJQUFJLENBQUMsY0FDTHFCLE1BQU0sR0FDTmpCLEVBQUUsQ0FBQyxXQUFXVyxRQUNkWCxFQUFFLENBQUMsVUFBVUQ7SUFFaEIsSUFBSUosT0FBTyxNQUFNQTtBQUNuQiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0b2NrLWFuYWx5dGljcy1kYXNoYm9hcmQvLi9zcmMvc2VydmljZXMvZGF0YWJhc2UudHM/M2Y2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL3NlcnZlcic7XG5pbXBvcnQgeyBcbiAgU3RvY2tJbmZvLCBcbiAgSW5zaWRlclRyYWRlLCBcbiAgT3B0aW9uc0Zsb3csIFxuICBIZWRnZUZ1bmRIb2xkaW5nLFxuICBEYXJrUG9vbERhdGEsXG4gIE1hcmtldEluZGljYXRvcixcbiAgV2F0Y2hsaXN0SXRlbVxufSBmcm9tICdAL3R5cGVzL2FwaSc7XG5cbi8vID09PT09PT09IFN0b2NrIEluZm8gPT09PT09PT1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdG9ja3MoKTogUHJvbWlzZTxTdG9ja0luZm9bXT4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdzdG9ja19pbmZvJylcbiAgICAuc2VsZWN0KCcqJyk7XG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b2NrQnlJZCh0aWNrZXI6IHN0cmluZyk6IFByb21pc2U8U3RvY2tJbmZvIHwgbnVsbD4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdzdG9ja19pbmZvJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ3RpY2tlcicsIHRpY2tlcilcbiAgICAuc2luZ2xlKCk7XG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICByZXR1cm4gZGF0YTtcbn1cblxuLy8gPT09PT09PT0gSW5zaWRlciBUcmFkaW5nID09PT09PT09XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW5zaWRlclRyYWRlcyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPEluc2lkZXJUcmFkZVtdPiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2luc2lkZXJfdHJhZGVzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAub3JkZXIoJ3RyYW5zYWN0aW9uX2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAubGltaXQobGltaXQpO1xuICBcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbi8vID09PT09PT09IEhlZGdlIEZ1bmQgSG9sZGluZ3MgPT09PT09PT1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIZWRnZUZ1bmRIb2xkaW5ncyhsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPEhlZGdlRnVuZEhvbGRpbmdbXT4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdoZWRnZV9mdW5kX2hvbGRpbmdzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAub3JkZXIoJ2ZpbGluZ19kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgLmxpbWl0KGxpbWl0KTtcbiAgXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG4vLyA9PT09PT09PSBPcHRpb25zIEZsb3cgPT09PT09PT1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcHRpb25zRmxvd0RhdGEobGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxPcHRpb25zRmxvd1tdPiB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ29wdGlvbl9mbG93X2RhdGEnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5vcmRlcignZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgIC5saW1pdChsaW1pdCk7XG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuLy8gPT09PT09PT0gRGFyayBQb29sIERhdGEgPT09PT09PT1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYXJrUG9vbEFjdGl2aXR5KGxpbWl0OiBudW1iZXIgPSAxMCk6IFByb21pc2U8RGFya1Bvb2xEYXRhW10+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZGFya19wb29sX2RhdGEnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5vcmRlcignZGF0YV9kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgLmxpbWl0KGxpbWl0KTtcbiAgXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIHJldHVybiBkYXRhIHx8IFtdO1xufVxuXG4vLyA9PT09PT09PSBNYXJrZXQgSW5kaWNhdG9ycyA9PT09PT09PVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1hcmtldEluZGljYXRvcnMoKTogUHJvbWlzZTxNYXJrZXRJbmRpY2F0b3JbXT4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtYXJrZXRfaW5kaWNhdG9ycycpXG4gICAgLnNlbGVjdCgnKicpO1xuICBcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgcmV0dXJuIGRhdGEgfHwgW107XG59XG5cbi8vID09PT09PT09IFVzZXIgV2F0Y2hsaXN0ID09PT09PT09XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlcldhdGNobGlzdCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V2F0Y2hsaXN0SXRlbVtdPiB7XG4gIC8vIEZvciByZWFkaW5nIHdhdGNobGlzdCBpdGVtcywgd2UgY2FuIHVzZSB0aGUgc2VydmVyIGNsaWVudCB0byBieXBhc3MgUkxTXG4gIGNvbnN0IHN1cGFiYXNlU2VydmVyID0gY3JlYXRlQ2xpZW50KCk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyXG4gICAgLmZyb20oJ3dhdGNobGlzdHMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICByZXR1cm4gZGF0YSB8fCBbXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFRvV2F0Y2hsaXN0KHVzZXJJZDogc3RyaW5nLCB0aWNrZXI6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBVc2Ugc2VydmVyIGNsaWVudCB0byBieXBhc3MgUkxTIGZvciBpbnNlcnRpbmdcbiAgY29uc3Qgc3VwYWJhc2VTZXJ2ZXIgPSBjcmVhdGVDbGllbnQoKTtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VTZXJ2ZXJcbiAgICAuZnJvbSgnd2F0Y2hsaXN0cycpXG4gICAgLmluc2VydCh7IHVzZXJfaWQ6IHVzZXJJZCwgdGlja2VyIH0pO1xuICBcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUZyb21XYXRjaGxpc3QodXNlcklkOiBzdHJpbmcsIHRpY2tlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIFVzZSBzZXJ2ZXIgY2xpZW50IHRvIGJ5cGFzcyBSTFMgZm9yIGRlbGV0aW5nXG4gIGNvbnN0IHN1cGFiYXNlU2VydmVyID0gY3JlYXRlQ2xpZW50KCk7XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyXG4gICAgLmZyb20oJ3dhdGNobGlzdHMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcbiAgICAuZXEoJ3RpY2tlcicsIHRpY2tlcik7XG4gIFxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xufSAiXSwibmFtZXMiOlsic3VwYWJhc2UiLCJjcmVhdGVDbGllbnQiLCJnZXRTdG9ja3MiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZ2V0U3RvY2tCeUlkIiwidGlja2VyIiwiZXEiLCJzaW5nbGUiLCJnZXRJbnNpZGVyVHJhZGVzIiwibGltaXQiLCJvcmRlciIsImFzY2VuZGluZyIsImdldEhlZGdlRnVuZEhvbGRpbmdzIiwiZ2V0T3B0aW9uc0Zsb3dEYXRhIiwiZ2V0RGFya1Bvb2xBY3Rpdml0eSIsImdldE1hcmtldEluZGljYXRvcnMiLCJnZXRVc2VyV2F0Y2hsaXN0IiwidXNlcklkIiwic3VwYWJhc2VTZXJ2ZXIiLCJhZGRUb1dhdGNobGlzdCIsImluc2VydCIsInVzZXJfaWQiLCJyZW1vdmVGcm9tV2F0Y2hsaXN0IiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/users.ts":
/*!*******************************!*\
  !*** ./src/services/users.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUserIfNotExists: () => (/* binding */ createUserIfNotExists),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserSubscription: () => (/* binding */ getUserSubscription),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserSubscription: () => (/* binding */ updateUserSubscription)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./src/lib/supabase/server.ts\");\n\n/**\n * Get a user from Supabase by their ID \n * Server-side function using the service role\n */ async function getUserById(userId) {\n    try {\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n        const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", userId).single();\n        if (error) {\n            console.error(\"Error fetching user:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Unexpected error fetching user:\", error);\n        return null;\n    }\n}\n/**\n * Update a user's profile in Supabase\n * Server-side function using the service role\n */ async function updateUser(userId, userData) {\n    try {\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n        const { error } = await supabase.from(\"users\").update({\n            ...userData,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", userId);\n        if (error) {\n            console.error(\"Error updating user:\", error);\n            return false;\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Unexpected error updating user:\", error);\n        return false;\n    }\n}\n/**\n * Get a user's subscription status\n * Server-side function using the service role\n */ async function getUserSubscription(userId) {\n    try {\n        console.log(`Fetching subscription for user: ${userId}`);\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n        const { data, error } = await supabase.from(\"users\").select(\"subscription_status, subscription_id, plan_type, is_annual, current_period_end, cancel_at_period_end\").eq(\"id\", userId).single();\n        if (error) {\n            console.error(\"Error fetching user subscription:\", error);\n            // Don't use mock data - log the error and return null\n            return null;\n        }\n        // If no data returned, log and return null\n        if (!data) {\n            console.log(`No subscription data found for user: ${userId}`);\n            return null;\n        }\n        // Validate currentPeriodEnd - set to null if invalid (year < 2000)\n        let currentPeriodEnd = data.current_period_end;\n        if (currentPeriodEnd) {\n            const date = new Date(currentPeriodEnd);\n            if (isNaN(date.getTime()) || date.getFullYear() < 2000) {\n                currentPeriodEnd = null;\n            }\n        }\n        return {\n            status: data.subscription_status,\n            plan: data.plan_type,\n            isAnnual: data.is_annual,\n            currentPeriodEnd: currentPeriodEnd,\n            cancelAtPeriodEnd: data.cancel_at_period_end,\n            subscriptionId: data.subscription_id\n        };\n    } catch (error) {\n        console.error(\"Unexpected error fetching user subscription:\", error);\n        return null;\n    }\n}\n/**\n * Update a user's subscription status\n * Server-side function using the service role\n */ async function updateUserSubscription(userId, subscriptionData) {\n    try {\n        console.log(`Updating subscription for user ${userId} with data:`, JSON.stringify(subscriptionData));\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n        // Create an update object including only the fields that are provided\n        const updateData = {\n            updated_at: new Date().toISOString()\n        };\n        if (subscriptionData.subscriptionId !== undefined) {\n            updateData.subscription_id = subscriptionData.subscriptionId;\n        }\n        if (subscriptionData.status !== undefined) {\n            updateData.subscription_status = subscriptionData.status;\n        }\n        if (subscriptionData.plan !== undefined) {\n            updateData.plan_type = subscriptionData.plan;\n        }\n        if (subscriptionData.isAnnual !== undefined) {\n            updateData.is_annual = subscriptionData.isAnnual;\n        }\n        if (subscriptionData.currentPeriodEnd !== undefined) {\n            updateData.current_period_end = subscriptionData.currentPeriodEnd;\n        }\n        if (subscriptionData.cancelAtPeriodEnd !== undefined) {\n            updateData.cancel_at_period_end = subscriptionData.cancelAtPeriodEnd;\n        }\n        console.log(`Updating with data:`, JSON.stringify(updateData));\n        const { error } = await supabase.from(\"users\").update(updateData).eq(\"id\", userId);\n        if (error) {\n            console.error(\"Error updating user subscription:\", error);\n            return false;\n        }\n        console.log(`Subscription updated successfully for user ${userId}`);\n        return true;\n    } catch (error) {\n        console.error(\"Unexpected error updating user subscription:\", error);\n        return false;\n    }\n}\n/**\n * Create a new user in Supabase if they don't exist yet\n * This is a fallback mechanism when the Clerk webhook fails to create the user\n */ async function createUserIfNotExists(userId, email, firstName, lastName) {\n    try {\n        console.log(`Checking if user exists and creating if needed: ${userId}`);\n        const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n        // First check if the user already exists\n        const { data: existingUser, error: checkError } = await supabase.from(\"users\").select(\"id\").eq(\"id\", userId).single();\n        // If user already exists, nothing to do\n        if (existingUser) {\n            console.log(`User ${userId} already exists in Supabase`);\n            return true;\n        }\n        if (checkError && checkError.code !== \"PGRST116\") {\n            // This is an error other than \"no rows returned\"\n            console.error(\"Error checking for existing user:\", checkError);\n            return false;\n        }\n        // User doesn't exist, create them\n        console.log(`Creating new user in Supabase: ${userId}`);\n        const { error: insertError } = await supabase.from(\"users\").insert({\n            id: userId,\n            email: email || \"unknown@example.com\",\n            first_name: firstName || null,\n            last_name: lastName || null,\n            subscription_status: \"inactive\",\n            plan_type: \"free\",\n            is_annual: false,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString(),\n            cancel_at_period_end: false\n        });\n        if (insertError) {\n            console.error(\"Error creating user in Supabase:\", insertError);\n            return false;\n        }\n        console.log(`Successfully created user ${userId} in Supabase`);\n        return true;\n    } catch (error) {\n        console.error(\"Unexpected error creating user:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUF0QyxRQUFRUSxHQUFHLENBQUMsQ0FBQywwQkFBMEIsRUFBRWhCLE9BQU8sWUFBWSxDQUFDO1FBQzdELE9BQU87SUFDVCxFQUFFLE9BQU9HLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdG9jay1hbmFseXRpY3MtZGFzaGJvYXJkLy4vc3JjL3NlcnZpY2VzL3VzZXJzLnRzP2RjMmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUgeyBEYXRhYmFzZSB9IGZyb20gJy4uL3R5cGVzL3N1cGFiYXNlJztcblxuZXhwb3J0IHR5cGUgVXNlciA9IERhdGFiYXNlWydwdWJsaWMnXVsnVGFibGVzJ11bJ3VzZXJzJ11bJ1JvdyddO1xuZXhwb3J0IHR5cGUgVXNlclVwZGF0ZURhdGEgPSBEYXRhYmFzZVsncHVibGljJ11bJ1RhYmxlcyddWyd1c2VycyddWydVcGRhdGUnXTtcblxuLyoqXG4gKiBHZXQgYSB1c2VyIGZyb20gU3VwYWJhc2UgYnkgdGhlaXIgSUQgXG4gKiBTZXJ2ZXItc2lkZSBmdW5jdGlvbiB1c2luZyB0aGUgc2VydmljZSByb2xlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciBmZXRjaGluZyB1c2VyOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSBhIHVzZXIncyBwcm9maWxlIGluIFN1cGFiYXNlXG4gKiBTZXJ2ZXItc2lkZSBmdW5jdGlvbiB1c2luZyB0aGUgc2VydmljZSByb2xlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyKHVzZXJJZDogc3RyaW5nLCB1c2VyRGF0YTogVXNlclVwZGF0ZURhdGEpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIC4uLnVzZXJEYXRhLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHVwZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHVzZXIncyBzdWJzY3JpcHRpb24gc3RhdHVzXG4gKiBTZXJ2ZXItc2lkZSBmdW5jdGlvbiB1c2luZyB0aGUgc2VydmljZSByb2xlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU3Vic2NyaXB0aW9uKHVzZXJJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYEZldGNoaW5nIHN1YnNjcmlwdGlvbiBmb3IgdXNlcjogJHt1c2VySWR9YCk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJ3N1YnNjcmlwdGlvbl9zdGF0dXMsIHN1YnNjcmlwdGlvbl9pZCwgcGxhbl90eXBlLCBpc19hbm51YWwsIGN1cnJlbnRfcGVyaW9kX2VuZCwgY2FuY2VsX2F0X3BlcmlvZF9lbmQnKVxuICAgICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgc3Vic2NyaXB0aW9uOicsIGVycm9yKTtcbiAgICAgIC8vIERvbid0IHVzZSBtb2NrIGRhdGEgLSBsb2cgdGhlIGVycm9yIGFuZCByZXR1cm4gbnVsbFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIGRhdGEgcmV0dXJuZWQsIGxvZyBhbmQgcmV0dXJuIG51bGxcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBObyBzdWJzY3JpcHRpb24gZGF0YSBmb3VuZCBmb3IgdXNlcjogJHt1c2VySWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgY3VycmVudFBlcmlvZEVuZCAtIHNldCB0byBudWxsIGlmIGludmFsaWQgKHllYXIgPCAyMDAwKVxuICAgIGxldCBjdXJyZW50UGVyaW9kRW5kID0gZGF0YS5jdXJyZW50X3BlcmlvZF9lbmQ7XG4gICAgaWYgKGN1cnJlbnRQZXJpb2RFbmQpIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50UGVyaW9kRW5kKTtcbiAgICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkgfHwgZGF0ZS5nZXRGdWxsWWVhcigpIDwgMjAwMCkge1xuICAgICAgICBjdXJyZW50UGVyaW9kRW5kID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogZGF0YS5zdWJzY3JpcHRpb25fc3RhdHVzLFxuICAgICAgcGxhbjogZGF0YS5wbGFuX3R5cGUsXG4gICAgICBpc0FubnVhbDogZGF0YS5pc19hbm51YWwsXG4gICAgICBjdXJyZW50UGVyaW9kRW5kOiBjdXJyZW50UGVyaW9kRW5kLFxuICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IGRhdGEuY2FuY2VsX2F0X3BlcmlvZF9lbmQsXG4gICAgICBzdWJzY3JpcHRpb25JZDogZGF0YS5zdWJzY3JpcHRpb25faWRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgZmV0Y2hpbmcgdXNlciBzdWJzY3JpcHRpb246JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIGEgdXNlcidzIHN1YnNjcmlwdGlvbiBzdGF0dXNcbiAqIFNlcnZlci1zaWRlIGZ1bmN0aW9uIHVzaW5nIHRoZSBzZXJ2aWNlIHJvbGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJTdWJzY3JpcHRpb24oXG4gIHVzZXJJZDogc3RyaW5nLCBcbiAgc3Vic2NyaXB0aW9uRGF0YToge1xuICAgIHN1YnNjcmlwdGlvbklkPzogc3RyaW5nLFxuICAgIHN0YXR1cz86IHN0cmluZyxcbiAgICBwbGFuPzogc3RyaW5nLFxuICAgIGlzQW5udWFsPzogYm9vbGVhbixcbiAgICBjdXJyZW50UGVyaW9kRW5kPzogc3RyaW5nLFxuICAgIGNhbmNlbEF0UGVyaW9kRW5kPzogYm9vbGVhblxuICB9XG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgVXBkYXRpbmcgc3Vic2NyaXB0aW9uIGZvciB1c2VyICR7dXNlcklkfSB3aXRoIGRhdGE6YCwgSlNPTi5zdHJpbmdpZnkoc3Vic2NyaXB0aW9uRGF0YSkpO1xuICAgIFxuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFuIHVwZGF0ZSBvYmplY3QgaW5jbHVkaW5nIG9ubHkgdGhlIGZpZWxkcyB0aGF0IGFyZSBwcm92aWRlZFxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcbiAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgaWYgKHN1YnNjcmlwdGlvbkRhdGEuc3Vic2NyaXB0aW9uSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5zdWJzY3JpcHRpb25faWQgPSBzdWJzY3JpcHRpb25EYXRhLnN1YnNjcmlwdGlvbklkO1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3Vic2NyaXB0aW9uRGF0YS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5zdWJzY3JpcHRpb25fc3RhdHVzID0gc3Vic2NyaXB0aW9uRGF0YS5zdGF0dXM7XG4gICAgfVxuICAgIFxuICAgIGlmIChzdWJzY3JpcHRpb25EYXRhLnBsYW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5wbGFuX3R5cGUgPSBzdWJzY3JpcHRpb25EYXRhLnBsYW47XG4gICAgfVxuICAgIFxuICAgIGlmIChzdWJzY3JpcHRpb25EYXRhLmlzQW5udWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHVwZGF0ZURhdGEuaXNfYW5udWFsID0gc3Vic2NyaXB0aW9uRGF0YS5pc0FubnVhbDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHN1YnNjcmlwdGlvbkRhdGEuY3VycmVudFBlcmlvZEVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB1cGRhdGVEYXRhLmN1cnJlbnRfcGVyaW9kX2VuZCA9IHN1YnNjcmlwdGlvbkRhdGEuY3VycmVudFBlcmlvZEVuZDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHN1YnNjcmlwdGlvbkRhdGEuY2FuY2VsQXRQZXJpb2RFbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdXBkYXRlRGF0YS5jYW5jZWxfYXRfcGVyaW9kX2VuZCA9IHN1YnNjcmlwdGlvbkRhdGEuY2FuY2VsQXRQZXJpb2RFbmQ7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBVcGRhdGluZyB3aXRoIGRhdGE6YCwgSlNPTi5zdHJpbmdpZnkodXBkYXRlRGF0YSkpO1xuICAgIFxuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgLmVxKCdpZCcsIHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHN1YnNjcmlwdGlvbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBTdWJzY3JpcHRpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHkgZm9yIHVzZXIgJHt1c2VySWR9YCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBlcnJvciB1cGRhdGluZyB1c2VyIHN1YnNjcmlwdGlvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHVzZXIgaW4gU3VwYWJhc2UgaWYgdGhleSBkb24ndCBleGlzdCB5ZXRcbiAqIFRoaXMgaXMgYSBmYWxsYmFjayBtZWNoYW5pc20gd2hlbiB0aGUgQ2xlcmsgd2ViaG9vayBmYWlscyB0byBjcmVhdGUgdGhlIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJJZk5vdEV4aXN0cyh1c2VySWQ6IHN0cmluZywgZW1haWw/OiBzdHJpbmcsIGZpcnN0TmFtZT86IHN0cmluZywgbGFzdE5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgQ2hlY2tpbmcgaWYgdXNlciBleGlzdHMgYW5kIGNyZWF0aW5nIGlmIG5lZWRlZDogJHt1c2VySWR9YCk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcbiAgICBcbiAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgdXNlciBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgLy8gSWYgdXNlciBhbHJlYWR5IGV4aXN0cywgbm90aGluZyB0byBkb1xuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7dXNlcklkfSBhbHJlYWR5IGV4aXN0cyBpbiBTdXBhYmFzZWApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGlmIChjaGVja0Vycm9yICYmIGNoZWNrRXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgLy8gVGhpcyBpcyBhbiBlcnJvciBvdGhlciB0aGFuIFwibm8gcm93cyByZXR1cm5lZFwiXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBmb3IgZXhpc3RpbmcgdXNlcjonLCBjaGVja0Vycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXNlciBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgdGhlbVxuICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyBuZXcgdXNlciBpbiBTdXBhYmFzZTogJHt1c2VySWR9YCk7XG4gICAgXG4gICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIGlkOiB1c2VySWQsXG4gICAgICAgIGVtYWlsOiBlbWFpbCB8fCAndW5rbm93bkBleGFtcGxlLmNvbScsXG4gICAgICAgIGZpcnN0X25hbWU6IGZpcnN0TmFtZSB8fCBudWxsLFxuICAgICAgICBsYXN0X25hbWU6IGxhc3ROYW1lIHx8IG51bGwsXG4gICAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6ICdpbmFjdGl2ZScsXG4gICAgICAgIHBsYW5fdHlwZTogJ2ZyZWUnLFxuICAgICAgICBpc19hbm51YWw6IGZhbHNlLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgY2FuY2VsX2F0X3BlcmlvZF9lbmQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIFxuICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlciBpbiBTdXBhYmFzZTonLCBpbnNlcnRFcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgY3JlYXRlZCB1c2VyICR7dXNlcklkfSBpbiBTdXBhYmFzZWApO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJnZXRVc2VyQnlJZCIsInVzZXJJZCIsInN1cGFiYXNlIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiY29uc29sZSIsInVwZGF0ZVVzZXIiLCJ1c2VyRGF0YSIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRVc2VyU3Vic2NyaXB0aW9uIiwibG9nIiwiY3VycmVudFBlcmlvZEVuZCIsImN1cnJlbnRfcGVyaW9kX2VuZCIsImRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJnZXRGdWxsWWVhciIsInN0YXR1cyIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJwbGFuIiwicGxhbl90eXBlIiwiaXNBbm51YWwiLCJpc19hbm51YWwiLCJjYW5jZWxBdFBlcmlvZEVuZCIsImNhbmNlbF9hdF9wZXJpb2RfZW5kIiwic3Vic2NyaXB0aW9uSWQiLCJzdWJzY3JpcHRpb25faWQiLCJ1cGRhdGVVc2VyU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVEYXRhIiwidW5kZWZpbmVkIiwiY3JlYXRlVXNlcklmTm90RXhpc3RzIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImV4aXN0aW5nVXNlciIsImNoZWNrRXJyb3IiLCJjb2RlIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJpZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJjcmVhdGVkX2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/users.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/crypto-js","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/@supabase","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwatchlist%2Froute&page=%2Fapi%2Fwatchlist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwatchlist%2Froute.ts&appDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fblakesingleton%2FDesktop%2FStock%20From%20Scratch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
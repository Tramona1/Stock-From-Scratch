
================================================================================
                        STARTING FINANCIAL DATA PIPELINE                        
================================================================================
2025-03-07 23:14:39,214 - pipeline_runner - INFO - [run_pipeline.py:119] - 
================================================================================
                        STARTING FINANCIAL DATA PIPELINE                        
================================================================================
Pipeline configuration:
2025-03-07 23:14:39,214 - pipeline_runner - INFO - [run_pipeline.py:315] - Pipeline configuration:
- Components: fda
2025-03-07 23:14:39,214 - pipeline_runner - INFO - [run_pipeline.py:316] - - Components: fda
- Watchlist only: False
2025-03-07 23:14:39,214 - pipeline_runner - INFO - [run_pipeline.py:317] - - Watchlist only: False
- Days to fetch: 3
2025-03-07 23:14:39,214 - pipeline_runner - INFO - [run_pipeline.py:318] - - Days to fetch: 3
- Limit per request: 5
2025-03-07 23:14:39,215 - pipeline_runner - INFO - [run_pipeline.py:319] - - Limit per request: 5

================================================================================
                 RUNNING FDA FETCHER: FDA drug approval events                  
================================================================================
2025-03-07 23:14:39,215 - pipeline_runner - INFO - [run_pipeline.py:119] - 
================================================================================
                 RUNNING FDA FETCHER: FDA drug approval events                  
================================================================================
Importing fetch_fda_calendar...
2025-03-07 23:14:39,215 - pipeline_runner - INFO - [run_pipeline.py:208] - Importing fetch_fda_calendar...
2025-03-07 23:14:39,521 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:46] - Successfully initialized Supabase client
✅ Module fetch_fda_calendar imported successfully
2025-03-07 23:14:39,521 - pipeline_runner - INFO - [run_pipeline.py:212] - ✅ Module fetch_fda_calendar imported successfully
✅ Class FDACalendarFetcher found in module
2025-03-07 23:14:39,521 - pipeline_runner - INFO - [run_pipeline.py:221] - ✅ Class FDACalendarFetcher found in module
Creating instance of FDACalendarFetcher...
2025-03-07 23:14:39,521 - pipeline_runner - INFO - [run_pipeline.py:228] - Creating instance of FDACalendarFetcher...
✅ Created instance of FDACalendarFetcher
2025-03-07 23:14:39,521 - pipeline_runner - INFO - [run_pipeline.py:238] - ✅ Created instance of FDACalendarFetcher
Running FDACalendarFetcher.run()...
2025-03-07 23:14:39,521 - pipeline_runner - INFO - [run_pipeline.py:269] - Running FDACalendarFetcher.run()...
2025-03-07 23:14:39,521 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:265] - Running FDA calendar fetcher for the next 180 days
2025-03-07 23:14:39,521 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:77] - Fetching FDA calendar for the next 180 days
2025-03-07 23:14:39,522 - unusual_whales_api - INFO - [unusual_whales_api.py:87] - Using cached data for market/fda-calendar
2025-03-07 23:14:39,522 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:97] - Successfully fetched 100 FDA events
2025-03-07 23:14:39,522 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:123] - Storing 100 FDA calendar events
2025-03-07 23:14:39,674 - httpx - INFO - [_client.py:1025] - HTTP Request: POST https://xtvfaileukqrdnnfghui.supabase.co/rest/v1/fda_calendar?on_conflict=event_id&columns=%22has_options%22%2C%22drug%22%2C%22end_date%22%2C%22source_link%22%2C%22notes%22%2C%22catalyst%22%2C%22marketcap%22%2C%22fetched_at%22%2C%22ticker%22%2C%22start_date%22%2C%22status%22%2C%22outcome%22%2C%22outcome_brief%22%2C%22description%22%2C%22indication%22 "HTTP/2 400 Bad Request"
2025-03-07 23:14:39,675 - fda_calendar_fetcher - ERROR - [fetch_fda_calendar.py:143] - Error storing FDA events: {'code': '42703', 'details': None, 'hint': None, 'message': 'column "event_id" does not exist'}
2025-03-07 23:14:39,676 - fda_calendar_fetcher - ERROR - [fetch_fda_calendar.py:144] - Traceback (most recent call last):
  File "/Users/blakesingleton/Desktop/Stock From Scratch/python/fetch_fda_calendar.py", line 136, in store_fda_events
    ).execute()
      ~~~~~~~^^
  File "/opt/homebrew/lib/python3.13/site-packages/postgrest/_sync/request_builder.py", line 78, in execute
    raise APIError(r.json())
postgrest.exceptions.APIError: {'code': '42703', 'details': None, 'hint': None, 'message': 'column "event_id" does not exist'}

2025-03-07 23:14:39,742 - httpx - INFO - [_client.py:1025] - HTTP Request: GET https://xtvfaileukqrdnnfghui.supabase.co/rest/v1/watchlists?select=id&limit=1 "HTTP/2 200 OK"
2025-03-07 23:14:39,744 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:223] - Watchlists table exists
2025-03-07 23:14:39,805 - httpx - INFO - [_client.py:1025] - HTTP Request: GET https://xtvfaileukqrdnnfghui.supabase.co/rest/v1/watchlists?select=tickers "HTTP/2 400 Bad Request"
2025-03-07 23:14:39,805 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:240] - Trying 'ticker' column instead of 'tickers'
2025-03-07 23:14:39,865 - httpx - INFO - [_client.py:1025] - HTTP Request: GET https://xtvfaileukqrdnnfghui.supabase.co/rest/v1/watchlists?select=ticker "HTTP/2 200 OK"
2025-03-07 23:14:39,865 - fda_calendar_fetcher - INFO - [fetch_fda_calendar.py:278] - FDA calendar fetcher completed - Stored 0 events
✅ fda: Completed successfully in 0.65s
2025-03-07 23:14:39,865 - pipeline_runner - INFO - [run_pipeline.py:289] - ✅ fda: Completed successfully in 0.65s

================================================================================
                           PIPELINE EXECUTION SUMMARY                           
================================================================================
2025-03-07 23:14:39,865 - pipeline_runner - INFO - [run_pipeline.py:119] - 
================================================================================
                           PIPELINE EXECUTION SUMMARY                           
================================================================================
fda            : ✅ SUCCESS
2025-03-07 23:14:39,865 - pipeline_runner - INFO - [run_pipeline.py:350] - fda            : ✅ SUCCESS

✅✅✅ ALL COMPONENTS COMPLETED SUCCESSFULLY: 1/1
2025-03-07 23:14:39,866 - pipeline_runner - INFO - [run_pipeline.py:355] - 
✅✅✅ ALL COMPONENTS COMPLETED SUCCESSFULLY: 1/1
Total pipeline execution time: 0.65 seconds
2025-03-07 23:14:39,866 - pipeline_runner - INFO - [run_pipeline.py:359] - Total pipeline execution time: 0.65 seconds
Complete log available at: logs/pipeline_20250307_231439.log
2025-03-07 23:14:39,866 - pipeline_runner - INFO - [run_pipeline.py:360] - Complete log available at: logs/pipeline_20250307_231439.log
